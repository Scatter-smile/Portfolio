<!DOCTYPE html>
<html>
<head>
  <title>Project View</title>

  <style>
    body {
      background: #000;
      color: white;
      font-family: Poppins, sans-serif;
      text-align: center;
      padding: 30px;
    }

    h1 { color: cyan; }

    /* PASSWORD POPUP */

    
    .popup {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.85);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }

    .popup-box {
      background: #111;
      padding: 25px;
      border-radius: 12px;
      width: 280px;
    }

    .popup-box input {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border-radius: 6px;
      border: none;
    }

    .eye {
      position: absolute;
      right: 10px;
      top: 15px;
      cursor: pointer;
      color: cyan;
    }

    .popup-box button {
      margin-top: 15px;
      width: 100%;
      padding: 10px;
      background: cyan;
      border: none;
      cursor: pointer;
    }

    /* UPLOAD */


    .upload-box {
      border: 2px dashed cyan;
      padding: 25px;
      border-radius: 15px;
      margin: 20px auto;
      max-width: 500px;
      display: none;
    }

    .preview {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px,1fr));
      gap: 20px;
      margin-top: 30px;
    }

    .item {
      position: relative;
      animation: zoom 0.6s ease;
    }

    .item img,
    .item video {
      width: 100%;
      border-radius: 12px;
      box-shadow: 0 8px 25px rgba(0,255,255,0.4);
    }

    .delete-btn {
      position: absolute;
      top: 6px;
      right: 6px;
      background: red;
      border: none;
      color: white;
      border-radius: 50%;
      width: 26px;
      height: 26px;
      cursor: pointer;
      display: none;
    }

    @keyframes zoom {
      from {transform: scale(0.7); opacity:0}
      to {transform: scale(1); opacity:1}
    }
  </style>
</head>

<body>

<h1 id="title"></h1>

<!-- PASSWORD POPUP -->


<div class="popup" id="popup">
  <div class="popup-box">
    <h3>Admin Access</h3>
    <div style="position:relative">
      <input type="password" id="password" placeholder="Enter password">
      <span class="eye" onclick="togglePassword()">üëÅÔ∏è</span>
    </div>
    <button onclick="checkPassword()">Submit</button>
  </div>
</div>

<!-- UPLOAD -->


<div class="upload-box" id="uploadBox">
  <input type="file" multiple accept="image/*,video/*" onchange="addFiles(event)">
</div>

<div class="preview" id="preview"></div>

<script>
  const ADMIN_PASSWORD = "1234";
  const popup = document.getElementById("popup");
  const uploadBox = document.getElementById("uploadBox");
  const preview = document.getElementById("preview");
  const params = new URLSearchParams(location.search);
  const projectType = params.get("type") || "default";
  const storageKey = "project_" + projectType;

  document.getElementById("title").innerText =
    projectType.toUpperCase() + " PROJECT";

  let isAdmin = false;
  let savedItems = JSON.parse(localStorage.getItem(storageKey)) || [];

  // AUTO CLOSE POPUP AFTER 15 SEC

  setTimeout(() => popup.style.display = "none", 15000);

  // LOAD ITEMS


  savedItems.forEach(i => createItem(i.src, i.type));

  function togglePassword() {
    const p = document.getElementById("password");
    p.type = p.type === "password" ? "text" : "password";
  }

  function checkPassword() {
    const val = document.getElementById("password").value;
    if (val === ADMIN_PASSWORD) {
      isAdmin = true;
      popup.style.display = "none";
      uploadBox.style.display = "block";
      document.querySelectorAll(".delete-btn").forEach(b => b.style.display="block");
    } else {
      popup.style.display = "none";
    }
  }

  function addFiles(e) {
    Array.from(e.target.files).forEach(file => {
      const r = new FileReader();
      r.onload = () => {
        const data = { src: r.result, type: file.type };
        savedItems.push(data);
        localStorage.setItem(storageKey, JSON.stringify(savedItems));
        createItem(data.src, data.type);
      };
      r.readAsDataURL(file);
    });
    e.target.value = "";
  }

  function createItem(src, type) {
    const div = document.createElement("div");
    div.className = "item";

    let media = type.startsWith("image")
      ? document.createElement("img")
      : document.createElement("video");

    if (media.tagName === "VIDEO") media.controls = true;
    media.src = src;

    const del = document.createElement("button");
    del.innerText = "√ó";
    del.className = "delete-btn";

    del.onclick = () => {
      preview.removeChild(div);
      savedItems = savedItems.filter(i => i.src !== src);
      localStorage.setItem(storageKey, JSON.stringify(savedItems));
    };

    if (isAdmin) del.style.display = "block";

    div.append(media, del);
    preview.appendChild(div);
  }
</script>

</body>
</html>
